[toc]
# 网络
## 扫盲
常见服务端口
|服务|端口|
|:--:|:--:|
|http|80|
|https|443|
|ftp|20 21|
|ssh|22|
|telnet|23|
|smtp|25|
|远程桌面|3389|
|dns|53|
### 专线
#### 形式
MSTP专线
MPLS专线
==》企业级专线
上下行带宽不对等

#### 定义
总部与分支机构之间的互通

>企业如果需要满足不同地区的公司内部可以互通
跨地域的公司互通
--企业专线
-自己搭建vpn

### 局域网和广域网（以太网）
>网络是指通过物理线路将所有的终端连接到一起，并且实现共享的环境

#### 局域网
-LAN-局域网-包含N多子网的网络，也可以理解为不经过路由的，或者纯交换网络   用过交换机连接  转发相同地址段的数据
-交换机
-IP地址段-同网段
局域网---- 同网段数据转发
同网段---- 查询MAC地址表
数据中心-IDC-Internet Data Center 因特网数据中心
运营商-电信 联通 移动 -SP-Service Provider服务提供商

局域网-依靠MAC地址进行数据转发
MAC地址---物理地址---网卡---出厂自带
记录下来 网卡MAC地址---所有链接下面的PC服务器等等 对端MAC都记录下来 ---MAC地址表

#### 广域网
-WAN-广域网-一般指物理范围很大的地区，例如国家和国家之间的网络，我们平时所说的internet就是最大的广域网   通过路由器连接  转发不用ip地址段的数据
-路由器
-IP地址段-跨网段
广域网---- 跨网段数据转发
跨网段---- 查询路由表

广域网-依靠IP地址进行
IP地址---逻辑地址---自动获得/手动获得
自动获得---DHCP 手动获得---手动配置
宽带（不是DHCP，通过其他方式下发）---地址池---PPOE情况下
跨网段通信---路由器
目的IP----路由表---IP地址转发表
你去哪  怎么走
201.10.138.5---f0/0口出去
135.21.35.10---f1/0口出去
每一条信息 ---路由信息-路由条目

>为何内网ip都是192.168.x.x网段
IANA组织（US）-规划全世界IP地址段-规划一个内网IP地址 全世界任何一个地方的内网都可以使用的 私网IP地址段 
192.168.X.X 规划进去了
局域网和广域网使用网关来界定

### ISP
ISP---Internet Service Provider
因特网服务提供商
移动 联通 电信----一级运营商（基础设施建设权）
-二级运营商
---小区宽带 ----长城宽带 歌华宽带  广电宽带 海泰宽带
社区宽带 ---购买线路 综合布线

### 分层
网络中传输数据时需要定义并遵循一些标准，以太网是根据IEEE802．3标
准来管理和控制数据帧的。了解IEEE802．3标准是充分理解以太网中链路
层通信的基础。为了将降低通信的复杂性，需要将协议进行分层处理。

网络通信协议
OSI TCP/IP IPX/SPX SNA
不同的协议栈用于定义和管理不同网络的数据转发规则


### 协议
决定数据的格式和传输的一组规则或者一组惯例

设备与设备之间通信的语言---TCP/IP协议
TCP/IP协议---地基---血液
OSPF RIP EIGRP协议---轮毂、架构---肢体
FTP HTTP 协议--服务、人---动作
IPX Appletalk

调制解调器 ----猫  数模转换  将电话的模拟信号转换成电脑可以识别的数字信号

协议分层原因
网络通信的过程很复杂
数据以电子信号的形式穿越介质到达正确的计算机，然后转换成最初的
形式，以便接收者能够阅读
为了降低网络设计的复杂性，将协议进行了分层设计

分层设计的意义
通信服务层的模块设计可相对独立于具体的通信线路和通信硬件接囗的差别
而通信服务层的模块设计又可相对独立于具体用户应用要求的不同
简化了相关的网络操作；提供了不同厂商之间的兼容性；促进了标准化工作：
结构上进行了分层；易于学习和操作。
各个层次独立，一层的变化不会影响到邻层。

### IP，子网掩码，网关
#### 水晶头制作
网线==》双绞线
直通线 568A---568A 568B---568B
交叉线 568A---568B

||1|2|3|4|5|6|7|8|
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|T-568A|绿白|绿|橙白|蓝|蓝白|橙|棕白|棕|
|T-568B|橙白|橙|绿白|蓝|蓝白|绿|棕白|棕|
实际上只有1 3 2 6在传输数据

#### IP--本机标识
IP报头：源目的IP字段
大小 32bit
32bit=4byte  //1M宽带
比特 字节
512k
512kbit/8 ---- 64kbyte
bit--网络单位
byte---存储单位
0-255之间
IPV4版本

bit 电脑记忆体中的最小单位，在二进制电脑中，没一bit可以代表0/1的数位讯号
Byte 字节单位，一般表示存储介质大小的单位，一个B（常用大写的B来表示Byte），中文占两个Byte
1Byte=8bit
1KB=1024Byte
1MB=1024KB
1GB=1024MB
 
ipv6   128bit

>在计算机网络或者是网络运营商中，一般，宽带速率的单位用bps(或b/s)表示；bps表示比特每秒即表示每秒钟传输多少位信息，是bit per second的缩写。在实际所说的1M带宽的意思是1Mbps（是兆比特每秒Mbps不是兆字节每秒MBps）。

#### 掩码--划分网段 
区分我和其他网络内的主机或网关是不是在一个地址段内

#### 网关--下一跳地址 
next-hop via  连接广域网 跨网段数据转发
实际工作中是一台硬件设备，一个接口连接外网，一个接口连接内网，可能是路由器，可能是三层交换机
网关设备与局域网内的其他设备一样，隶属于一个IP地址段内，连接着外网Internet

#### 数据包
大小一般为1500byte---是通用标准---MTU最大传输单元
并不是越大越好，因为网络本身有限速,网络接口的MTU可能达不到，从而造成分片，导致数据传输过程中的不稳定
所以修改MTU并不会使网速变快，需要调整整个链路，统一修改

### IPV4升级IPV6原因
1. 地址不够用
2. arp攻击
3. 包头设计结构复杂，多数字段当前没有实际意义，增加了设备读取数据包消耗时间及资源 

IPV6精简了非常多字段

### 域名
便于记忆
www.baidu.com ---第一步 数据发送到哪里？
发送DNS服务器上进行查询
域名对应的IP地址

8.8.8.8 4.4.4.4 ---全球Google dns地址
114.114.114.114 ---全国比较火的DNS地址

为了提高查询速度，需要了解本地DNS地址并进行配置

#### 域名地址意义
|域名|含义|
|:--:|:--:|
|com|商业机构|
|edu|教育机构|
|gov|政府部门|
|mil|军事机构|
|net|网络组织|
|int|国际机构（主要指北约）|
|org|其他非盈利机构|

### MAC
交换机：连接局域网

switch 交换机
router 路由器
firewall fw 防火墙

交换机只会记录接口对应设备的mac地址---mac地址表（交换机通过数据包源mac确认）

mac地址表保存时间一般为300s，按每个条目计时
一般会将该时间调大至3600s，不然频繁广播更新mac地址表会浪费设备转发性能

局域网--转发相同IP地址段数据的网络 --- 相同IP地址段内

#### arp和mac地址表没有关系
没有
mac是交换机地址的表，记录每一个接口连接对方的mac
arp是终端获取其他设备mac地址而是用的一种协议

### ARP
#### arp协议
地址解析协议---通过ip地址寻找mac地址

如果我的电脑访问的目的IP和我不在一个网段，会自动去找网关mac
乳沟我的电脑访问的目的IP和我在一个网段，会自动去找这个要访问的目的MAC

#### ARP寻找--怎么寻找
1. PC1产生了一条信息  广播信息  内网泛洪查询
请问一下192.168.1.1的mac地址是多少
注：广播和ARP----在IPV6中消失了
2. GW产生的一个单播消息，进行回应 回应PC1
我就是你要找的，我的ip192.168.1.1我的mac是c
3. PC1收到了记录到自己的ARP表，
192.168.1.1-------C
统称为ARP表
PC1在产生实际的业务数据 到达目的
192.168.1.1 可以查询自己的ARP表 进行数据封装

#### ARP攻击
（有时候可以上网有时候不能上网，因为真实PC会正常进行回应）
1. PC1广播 请问一下 网关192.168.1.1的mac地址是多少
2. 欺骗设备进行回复，我就是192.168.1.1的mac地址是G
3. PC1产生了一条信息，目的mac是G，交换机不知道G在哪，继续泛洪

#### ARP攻击判断&处理
1. 抓包
2. arp数量监测，判断接口arp包量，异常则down掉接口 errdisable ------zabbix
3. 静态绑定ip与mac
arp -s ip mac   一般绑定网关
重启失效，一般写入bat文件，开机启动加载

#### arp -a 类型静态与动态的区别
动态  自动对外请求获取，一旦接受arp消息，就会更新arp表
静态不会


#### 无盘启动和arp有无关系
逆向arp---rarp  通过本地mac地址寻找自己的ip地址

### 其他
三层交换机的任何一个接口或者任何一个IP地址，都可以作为管理地址出现

RJ-11  电话线  早期有些主机内置猫
RJ-45  网线接口
serial 接console线 设备调试接口   即com口  串口

#### 实际工作中远程登录一台网络设备
---telnet 不怎么用 --不加密的,会被抓取到密码
---ssh 经常使用    --加密工具
内网的设备 ------vpn连接到公司 --- ssh 公司内部的网络设备上
客户（公司）网络出问题
驻场--联通电信移动--运营商 分权限 --vpn（PPTP） 公司 SSH设备
简单 检查 调试

#### vpn
vitual private network  虚拟私有网络
L2L
总公司局域网---》Internet---》分公司局域网
samsung ibm 公司内网规划ip地址段   A类地址段
10.x.x.x 主机ip不一样  可以相互互通

## OSI
网络标准 ISO 国际标准化组织

### 七层概念
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz01vmbqwj30ts0kzq9q.jpg)

OSI参考模型简介
国际标准化组织ISO于1984年提出了OSI(Open SystemlnterconnectionReferenceNodel，开放系统
互连参考模型）。OSI参考模型很快成为了计算机网络通信的基础模型。
0SI参考模型具有以下优点：简化了相关的网络操作；提供了不同厂商之间的兼容性；促进了标准化工作
；结构上进行了分层：易于学习和操作。
0SI参考模型各个层次的基本功能如下：
物理层：在设备之间传输比特流，规定了电平、速度和电缆针脚，
数据链路层：将比特组合成字节，再将字节组合成帧，使用链路层地址（以太网使用MAC地址）来访问介
质，并进行差错检测：
网络层：提供逻辑地址，供路由器确定路径 IP
传输层：提供面向连接或非面向连接的数据传递及进行重传前的差错检测。    UDP TCP 
------------数据层面  数据流层
会话层：负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间
的服务请求和响应组成·（通信设备可能存在多个会话）
表示层：提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系
统的应用层识别：（数据表示、加密；片，文档，文字）
应用层：0SI参考模型中最靠近用户的一层，为应用程序提供网络服务   HTTP  FTP
------------应用层面

### OSI层次设计理念
建立七层模型的主要目的是为解决异种网络互连时所遇到的兼容性
问题。
它的最大优点是将服务、接口和协议这三个概念明确地区分开来
服务：某一层为上一层提供一些什么功能
接囗：上一层如何使用下层的服务
协议：如何实现本层的服务
这样各层之间具有很强的独立性，互连网络中各实体采用什么样的
协议是没有限制的，只要向上提供相同的服务并且不改变相邻层的
接口就可以了

### 层次举例
写信

应用层、表示层、会话层一般归为一层，
写信、表示方式、给谁写

传输层 顺丰   TCP
      中通 申通 圆通 韵达  UDP

网络层  寄件地址-源地址 收件地址-目的地址   IP

数据链路层 大巴 飞机 船 火车

物理层  公路 铁路

举例说明：
快递公司对于写信人来说是下层
运输部门是邮局的下层
      --下层为上层提供服务
写信人与收信人之间使用相同的语言
邮局之间的约定
      --同层次之间使用相同的协议


### 分层模型
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz5y7qw8oj30t60llgwq.jpg)

### 分层结构
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz60l6tuej30tm0irqba.jpg)


## TCP/IP分层模型
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz66xl9hij30os0hktap.jpg)

   
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz68vh4azj30qh0gogtm.jpg)


### 数据封装
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz6cb4vb3j30rh0hitc3.jpg)

### 数据传输过程
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz6h3ujxkj30uv0huqea.jpg)

### 终端之间的通信
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz6jq3obaj30ow0bj40e.jpg)
数据链路层控制数据帧在物理链路上传输

### 帧格式
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz6mmzygej30t80g1q7r.jpg)

D.MAC 目的mac地址
S.MAC 源mac地址
Type  类型
Data  数据
FCS   校验
Length 长度

Length/Type大于等于1536   ==》Ethernet_Ⅱ
Length/Type小于1500   ==》IEEE802.3

### Ethernet_Ⅱ帧格式
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz746q1lfj30rp0d3tb1.jpg)
注：0x表示16进制

Ethernet_Ⅱ帧类型值大于等于1536（0x0600）
详情参考如下链接
(https://blog.csdn.net/eydwyz/article/details/65446328)
以太数据帧的长度在64-1518字节之间

### IEEE802.3帧格式
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz8idgx2ij30t40j2n20.jpg)
Length：表示LLC+SNAP+Data的长度，一定<=1500

### 数据帧传输
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz8nts178j30r90ip77d.jpg)

### 以太网的MAC地址
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz8quv675j30sg0hq0vx.jpg)

### 单播
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz90zt9gqj30p90hiwh8.jpg)
查看这个帧是否是单播，看目的mac地址第八个比特位，为0的话就是单播

### 广播
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz93l2v5nj30so0gx0w6.jpg)
目的mac地址全部为F

### 组播
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz9527j3sj30p70h2q5o.jpg)
目的MAC地址第8个比特位为1

### 数据帧的发送和接收
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdz9bn6pf7j30st0j042z.jpg)


>小结
>网络设备如何确定以太网数据帧的上层协议？
>根据type类型
>终端设备接收到数据帧时，会如何处理？

## IP编址
网络层位于数据链路层与传输层之间。网络层中包含了许多协议，其中
虽为重要的协议就是IP协议。网络层提供了IP路由功能。理解IP路由除了
要熟悉IP协议的工作机制之外，还必须理解IP编址以及如何合理地使用IP
地址来设计网络。

### 上层协议类型
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdzdewnbdoj30t40dctah.jpg)
以太网帧中的Type字段为0x0800，表示该帧的网络协议为IP协议

### IP报文头部
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdzdq6q0jij30tl0io0w1.jpg)
20-60B的原因是因为要加上IP Options    不包含数据


### IP包头格式
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gdzdsedihtj30vv0jowhu.jpg)
图中的单位是  比特  bit   



#### Version
4bit的版本字段表示IP的版本号。如果为0100表示IPv4，如果为0110表示IPv6。

#### header length
4比特的首部长度字段表示IP首部的总长度，其中包括选项字段（如果有）。该字段的表示的长度单位为32bit（4 bytes），因此首部长度最大为15（1111）*32bit=60bytes。在没有选项时，该字段的值为5，表示普通的IP包头长度20bytes。
1代表4个字节
2代表8个字节

#### Differentiated Service Field）  QOS会提到 
8bit的服务器类型（TOS）字段，其中前3个bit表示优先权（现在已经忽略该字段），随后的4个bit表示服务类型，按顺序分别表示为最小时延、最大吞吐量、最高可靠性、最小费用四种。这个4个bit中最多只能有1个bit置位，如果全是0则表示一般服务。最有1个bit为未用位，必须置0。
#### Total Length）  
首部长度+数据长度
16个bit的总长度字段表示整个IP数据报的长度，以字节为单位。所以IP数据报的最大长度为16个1=65535bytes。

此处的总长度字段与MTU是密切相关的，MTU表示IP数据报的最大传输单元的大小，我们知道一般默认的MTU值为1500，也就是说单个IP数据报的最大长度为1500bytes。常规的无选项的IP包头长度为20bytes，可以通过MTU计算出DATA数据字段的最大长度为1480bytes。不仅如此，MTU还与TCP协议报头中的MSS有关联，MSS表示TCP数据报的最大传输长度，常规的TCP报头长度为20bytes，又因为TCP报头是封装在IP包头上的，所以MSS一般为1460bytes=MTU1500-IP包头20-TCP报头20。（其中关于MSS字段的详细解释请参见《TCP协议文档》）。由于默认MTU为1500bytes，所以网卡发送的数据帧的大小为1518bytes，多了18bytes分别为：目的MAC（6bytes）、源MAC（6bytes）、type（2bytes）、CRC（4bytes）。（具体关于二层数据帧的解释请参见《二层数据帧文档》）
#### Identification）
16bit的标识字段唯一的标识主机发送的每一份数据报，由主机生成具有唯一性。通常每发送一份报文该值加1。该值在数据包分片时，会复制到每一个片中。所以在重组分片包的时候会观察该值，把该值相同的分片收集到一起重组，后面会继续讨论分片。
#### Flag）
3bit的标识字段每一位都有特定的含义，该字段主要用来分片和重组。第1个bit为保留位（Reserved Bit），一般置位0。第2个bit为不分片位（Don’t Fragment），该位在置1时表示不分片。第3个bit为更多片位（More Fragment），该位表示后面是否还有更多的分片，置位1时表示后面还有，所以除了最后一片报文，其他分片报文该位全部置1。
#### Fragment Offset）
13比特的片偏移字段表示分片时，每一个分片的数据字段偏移原始数据报开始处的位置。比如原始数据报的数据字段总长为1461bytes，使用TCP传输协议，那么对该数据报进行分片，第一片的offset字段为0，第二片的offset字段就应该为1460。就是这么理解就对了^_^

再次简要讨论一下分片：把一份超过MTU的数据报分片以后，这些分片只有在到达目的地才进行重新组装。在一组分片报文传输的过程时中间设备有可能会对该分片再次分片。如果采用TCP传输协议，在传输过程中丢失一个分片报文，那么整个TCP数据报都将被重新传送，不会只发送丢失的分片。其原因是TCP协议有自己的超时和重传机制。（详解请参见《TCP协议文档》）

在一组分片报文中，任何传输层的首部只会出现在第一个分片中。并且由于数据报被分片后IP包头的首部校验和将会重算。在分片时，出最后一片外，其他每一片的数据部分必须是8字节的整数倍。

#### Time To Live    ==》 TTL
8bit的生成时间字段表示该IP数据包可以经过的路由器的最大数量。最大为256表示可以穿越256台路由，该字段采用减法的方式赋值，比如在开始时8个bit全部置位1，没经过一台路由器该字段的值减1。如果该字段的值减到了0还没有送达目的地，那么该IP数据包将被丢弃。最初设计这个字段是为了防止IP报文在网络中循环无限传输，占用带宽等问题。

#### Protocol）
8bit的协议字段表示在IP上层承载的是什么协议。比如：0x01表示ICMP协议、0x06表示TCP协议、0x11表示UDP协议等。==》用于表示封装的上层数据时UDP还是TCP，UDP是17 TCP是6 

#### Header Checksum）
16bit的首部校验和字段用来使接收端检验收到的报文是否正确。该字段只对IP首部计算校验和不包含后面的数据字段。原因是IP的上层协议比如ICMP、IGMP、TCP、UDP协议的各自首部中均含有同时覆盖首部和数据的校验和。

计算方法：首先把首部中的该字段全部置0，然后对首部中的每个16bit进行反码求和，得到的值就是该字段的值，填入后。将该数据包发给接收端后，接收端将进行相同的操作，对每个16bit进行反码求和（此时首部校验和字段为非0字段），所以计算后的值若为全1表示正确，否则表示收到的数据包不正确，动作为丢弃。

#### Option）
一般不使用该字段，该字段的值以32bit为单位，不足时以0补充。

### IP编址
|网络位|主机位|
|:--:|:--:|
|192.168.1|.1|
|11000000.10101000.00000001|.00000001|

IP地址分为网络部分和主机部分
      第一部分是网络号，表示IP地址所属的网段
      第二部分是主机号，用来标识本网段上的某台网络设备
IP地址由32个二进制位组成，通常用点分十进制形式表示

网络地址==》对一个网段的描述
|网络位|主机位|
|:--:|:--:|
|192.168.1|.0|
|11000000.10101000.00000001|.00000000|

广播地址==》主机位全部为1
|网络位|主机位|
|:--:|:--:|
|192.168.1|.255|
|11000000.10101000.00000001|.11111111|

#### 进制
|进制|字符范围|基值|
|:--:|:--:|:--:|
|二进制|0-1|2|
|十进制|0-9|10|
|十六进制|0-9，A-F|16|

在IP网络中，二进制和十六进制是常用的编码方式

#### 进制转换
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge42ay5rigj30s50hlwjq.jpg)

#### 二进制和十进制转换
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge42huaszxj30v40d7q6r.jpg)

十进制转二进制采用除二取余法
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge42oi485gj30dg09zwit.jpg)

#### IP地址分类
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge42pybtjaj30pm0i6dl2.jpg)

ABC都是单播地址

A类地址中127.0.0.0-127.255.255.255这一整段是无法使用的  预留给系统中tcp协议栈用的

#### IP地址类型
私有地址范围
A类   10.0.0.0-10.255.255.255
B类   172.16.0.0-172.31.255.255
C类   192.168.0.0-192.168.255.255
特殊地址
127.0.0.0-127.255.255.255
0.0.0.0===》DHCP会提到
255.255.255.255==》全部网络

#### 子网掩码  
用途：用于确定网络位，主机位
|网络位|主机位|
|:--:|:--:|
|192.168.1|.0|
|11000000.10101000.00000001|.00000000|

|子网掩码||
|:--:|:--:|
|255.255.255|.0|
|11111111.11111111.11111111|.00000000|

#### 默认子网掩码
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge44o7ab0dj30ph0aj76g.jpg)

#### 地址规划
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge44rcpu46j30s60i30yc.jpg)
#### 有类IP编址的缺陷
在设计网络时使用有类IP地址会造成地址的浪费


#### 变长子网掩码VLSM
![](http://ww1.sinaimg.cn/large/005Lei8Jly1ge452t3e2bj30tp0kidn9.jpg)

##### 子网划分
核心思想
借用“主机位”来“制造”新的“网络”

好处
缩减网络流量
优化网络性能
简化管理
更为灵活的形成大覆盖范围网络

最本质作用：合理分配IP地址

##### 子网划分方法
划分子网方法
1、根据需要的子网数目来确定子网位数，但是需要确保每个子网可用IP地址数大于等于主机数。
优点：简单
缺点：每个子网的实际主机数不同，但是分配的IP地址数目相同，可能浪费IP地址
2、根据每个子网的主机数目来确定主机位数，然后确定子网位数
有点：比较充分的利用IP地址
缺点：复杂

>1、子网数目=2的x次方（x代表子网位数，即借用的主机位数）
>2、主机数目=2的y次方-2（y代表主机位数）
>3、主机位为1的地址是广播地址=下个子网号-1
>4、主机位为全0的地址是网络地址

##### 变长子网掩码举例
现有一个C类网络地址段192.168.1.0/24，请使用变长子网掩码给三个子网分别分配IP地址

子网1：192.168.0.0/26
子网2：192.168.0.64/26
子网3：192.168.0.128/26

子网4：192.168.0.192/26（空余一个子网）

方法一：C类地址子网划分 例子1
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gedeff2642j30m80f6qad.jpg)

方法二：B类地址子网划分 例子1
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gegpx4u54bj30k40h1qam.jpg)

方法一：B类地址子网划分 例子2
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gegqbl8g2sj30jk0gk10v.jpg)


方法二： 思路
1. 根据每个子网需要的主机数，确定需要的主机位数
      确定主机位的方法：2的n次方-2 >=主机数，其中n为主机位位数
2. 划分网段遵循“先大后小”的原则

方法二： 举例-1
![](http://ww1.sinaimg.cn/large/005Lei8Jly1gegqm3ykbij30ra0drtfd.jpg)
1. D需要2个VLAN，然后每个VLAN容纳200个用户
2. A，B和C链接3个以太网，分别与1个24口交换机相连






























